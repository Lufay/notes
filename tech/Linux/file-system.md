# 文件系统

## 用户
在linux中的每个用户必须属于一个组，不能独立于组外
每个文件有所有者、所属组、其它的概念。
ll 命令的第三四列就是文件的所有者和所属组

### user
所有者一般就是文件的创建者，
可以使用chown 改变文件的所有者

### group
当某个用户创建了一个文件后，这个文件的所属组就是该用户所在的组
可以使用chgrp 来修改文件所属的组

### other
除文件的所有者和所在组的用户外，系统的其它用户

## 文件属性
ll 命令的第一列首字符
`-` 代表文件
d 代表目录
l 代表链接文件
b 代表设备文件里的块设备，例如存储设备
c 代表设备文件里的串行接口设备，例如键盘鼠标等
s 套接字（sockets）
p 管道（FIFO，pipe）

## 文件权限
可以使用chmod 来修改文件权限
ll 命令的第一列除了首字符之外的9个字符，这9个字符，3个一组分别表示所有者、所属组、其他的r/w/x 权限

+ 对文件
r: 是否可以读这个文件的具体内容；
w: 是否可以编辑这个文件的内容，包括增加和删除文件的具体内容；
x: 是否可执行文件
+ 对目录
r: 是否可以查看此目录下的完整文件列表信息
w: 是否可以更改这个目录下的结构列表（增删文件或目录，包括mv）
x: 是否允许别的用户进入这个目录

### 特殊权限
在上面权限x 的位置可能替换为s/t/S/T

#### setuid/setgid
默认情况下，当一个用户执行一个命令时，则该命令的执行权限就是该用户的权限
如果命令文件所有者x 位被s 替换，代表该命令的执行权限使用命令文件的所有者的权限（setuid）
如果命令文件所属组x 位被s 替换，代表该命令的执行权限使用命令文件的所属组的权限（setgid）

例如/etc/passwd 该文件只有root 用户有写权限，而普通用户又能通过/usr/bin/passwd 命令修改该文件
就是因为/usr/bin/passwd 命令的权限为rwsr-xr-x，即其他用户执行该命令时，都当做root用户去执行一样

#### stick bit
粘滞位是针对目录来说的
如果目录的其他权限上的x 位被t 替代，代表该目录下的文件的文件除了文件的创建者和root用户外都不能删除（即使对该目录有w 权限也不行）

例如/tmp 目录是所有用户都拥有全部权限的，但显然用户都不希望其他用户删除其文件，故该目录的权限为rwxrwxrwt

#### 补充
如果s/t 变成了S/T，表示该位置原来没有x 权限（当然setuid/setgid 也就不会生效）
如果使用八进制数字表示，则权限使用四位数字，首位数字：4: setuid, 2: setgid, 1: stick

#### 授权
chmod u+s file
chmod g+s dir
chmod o+t dir

## i-node
ll 命令的第二列表示有多少文件名连接到此节点
一个i-node可以被多个文件使用，这就是所谓的hard link

