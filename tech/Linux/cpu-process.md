# CPU 和进程

top命令可以查看当前系统的实时动态视图

负载信息：
Load Avg 的三个值分别是1min 5min 15min 到现在任务队列的平均长度（若持续高于CPU数，则说明负载过高）

CPU使用率：
us  用户空间占用CPU百分比  
sy  内核空间占用CPU百分比  
ni  用户进程空间内改变过优先级的进程占用CPU百分比  
id  空闲CPU百分比  
wa  等待输入输出的CPU时间百分比  
hi  
si  

进程信息：
a  PID：进程的ID
b  PPID：父进程id  
c  RUSER：Real user name  
d  UID：进程所有者的用户id  
e  USER：进程所有者的用户名  
f  GROUP：进程所有者的组名  
g  TTY：启动进程的终端名。不是从终端启动的进程则显示为 ?  
h  PR：进程的优先级，越小越优先被执行
i  NI：nice值，负值表示高优先级，正值表示低优先级
j  P：最后使用的CPU，仅在多CPU环境下有意义  
k  %CPU：进程占用CPU的使用率（时间占用）
l  TIME：该进程启动后占用的总的CPU时间（单位秒）  
m  TIME+：该进程启动后占用的总的CPU时间，即占用CPU使用时间的累加值（单位1/100秒）  
n  %MEM：进程使用的物理内存和总内存的百分比
o  VIRT：进程占用的虚拟内存总量，单位kb，VIRT=RES+SWAP
p  SWAP：进程使用的虚拟内存中被换出的大小，单位kb
q  RES：进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA
r  CODE：可执行代码占用的物理 内存大小，单位kb  
s  DATA：可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb  
t  SHR：共享内存大小，单位kb  
u  nFLT：页面错误次数  
v  nDRT：最后一次写入到现在，被修改过的页面数  
w  S：进程的状态。D=不可中断的睡眠状态，S=休眠，R=正在运行，Z=僵死状态，N=该进程优先值为负数
x  COMMAND：进程启动命令
y  WCHAN：若该进程在睡眠，则显示睡眠中的系统函数名  
z  Flags：任务标志，参考 sched.h

内部命令：
f - 更改显示列表的字段，然后按 a-z 即可显示或隐藏对应的列，最后按回车键确定
o - 可以改变列的显示顺序，按小写的 a-z 可以将相应的列向右移动，而大写的 A-Z  可以将相应的列向左移动。最后按回车键确定
F/O - 然后按 a-z 可以将进程按照相应的列进行排序
R - 将当前的排序倒转
s - 改变画面更新频率
l - 关闭或开启第一部分第一行 top 信息的表示
t - 关闭或开启第一部分第二行 Tasks 和第三行 CPUs 信息的表示
m - 关闭或开启第一部分第四行 Mem 和 第五行 Swap 信息的表示
c - 切换显示命令名称和完整命令行  
N - 以 PID 的大小的顺序排列表示进程列表  
P - 以 CPU 占用率大小的顺序排列进程列表  
M - 以内存占用率大小的顺序排列进程列表  
T - 以时间、累计时间排序  
h - 显示帮助
n - 设置在进程列表所显示进程的数量
W - 将当前设置写入~/.toprc文件中
q - 退出 top
